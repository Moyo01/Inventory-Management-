<template>
    <lightning-card title="Inventory Management System" icon-name="standard:product" class="slds-m-left_medium">
        <lightning-layout class="slds-m-left_medium slds-grid slds-wrap">
            <lightning-layout-item class="slds-size_8-of-12">
                <lightning-input type="search" label="Search Inventory" title="Search Inventory" onchange={handleChange}></lightning-input>
            </lightning-layout-item>
        </lightning-layout>  
       
        <lightning-layout class="slds-col slds-size_2-of-3 slds-p-top_medium slds-p-bottom_x-large">
            <lightning-layout-item class="slds-m-left_medium">
                <lightning-button label="Search Product" title="Search Product" variant="brand" onclick={handleSearch}></lightning-button>
            </lightning-layout-item>
        </lightning-layout>
        
        <!--- if no name is entered in the field 'showInitialMessage'  -->
        <template if:true={showInitialMessage}>
            <p class="slds-p-around_medium">Enter search term to search the inventory</p>
        </template>

         <!--- if names is entered in the field 'showInitialMessage'  -->
        <template if:false={showInitialMessage}>
            <table aria-multiselectable="true" class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols slds-p-top_medium" role="grid" aria-label="Inventory management table">
                <thead>
                    <tr class="slds-line-height_reset">
                        <th class="slds-cell_action-mode" scope="col" style="width:3.25rem">
                            <div class="slds-truncate slds-assistive-text" title="Select">Select</div>
                        </th>
                        <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                <span class="slds-assistive-text">Sort by: </span>
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Name">Name</span>
                                    <span class="slds-icon_container slds-icon-utility-arrowdown">
                                        <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon " aria-hidden="true">
                                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                        </svg>
                                    </span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Name column width" class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-15" max="1000" min="20" tabindex="0" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                <span class="slds-assistive-text">Sort by: </span>
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Product Code">Product Code</span>
                                    <span class="slds-icon_container slds-icon-utility-arrowdown">
                                        <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon " aria-hidden="true">
                                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                        </svg>
                                    </span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Product Code column width" class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-17" max="1000" min="20" tabindex="0" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                <span class="slds-assistive-text">Sort by: </span>
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Status">Status</span>
                                    <span class="slds-icon_container slds-icon-utility-arrowdown">
                                        <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon " aria-hidden="true">
                                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                        </svg>
                                    </span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Status column width" class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-18" max="1000" min="20" tabindex="0" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                <span class="slds-assistive-text">Sort by: </span>
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Stock Quantity">Stock Quantity</span>
                                    <span class="slds-icon_container slds-icon-utility-arrowdown">
                                        <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon " aria-hidden="true">
                                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                        </svg>
                                    </span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Stock Quantity column width" class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-19" max="1000" min="20" tabindex="0" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                <span class="slds-assistive-text">Sort by: </span>
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Price">Price</span>
                                    <span class="slds-icon_container slds-icon-utility-arrowdown">
                                        <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon " aria-hidden="true">
                                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                        </svg>
                                    </span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Price column width" class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-20" max="1000" min="20" tabindex="0" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <template if:true={inventories}>
                        <template for:each={inventories} for:item="inventory" for:index="index">
                            <tr key={inventory.Id} aria-selected="false" class="slds-hint-parent">
                                <td class="slds-text-align_right slds-cell_action-mode" role="gridcell">
                                    <div class="slds-checkbox">
                                        <input type="checkbox" name="options" id={inventory.Id} value={inventory.Id} tabindex="0" aria-labelledby={inventory.Id} />
                                        <label class="slds-checkbox__label" for={inventory.Id} id={inventory.Id}>
                                            <span class="slds-checkbox_faux"></span>
                                            <span class="slds-form-element__label slds-assistive-text">Select {inventory.Name__c}</span>
                                        </label>
                                    </div>
                                </td>
                                <th class="slds-cell_action-mode" scope="row">
                                    <div class="slds-truncate slds-p-horizontal_small">
                                        <lightning-formatted-text value={inventory.Name__c}></lightning-formatted-text>
                                    </div>
                                </th>
                                <td class="slds-cell_action-mode" role="gridcell">
                                    <div class="slds-truncate slds-p-horizontal_small">
                                        <lightning-formatted-text value={inventory.Product_Code__c}></lightning-formatted-text>
                                    </div>
                                </td>
                                <td class="slds-cell_action-mode" role="gridcell">
                                    <div class="slds-truncate slds-p-horizontal_small">
                                        <lightning-badge label={inventory.Status__c}></lightning-badge>
                                    </div>
                                </td>
                                <td class="slds-cell_action-mode" role="gridcell">
                                    <div class="slds-truncate slds-p-horizontal_small">
                                        <lightning-formatted-number value={inventory.Stock_Quantity__c}></lightning-formatted-number>
                                    </div>
                                </td>
                                <td class="slds-cell_action-mode" role="gridcell">
                                    <div class="slds-truncate slds-p-horizontal_small">
                                        <lightning-formatted-number value={inventory.Price__c} format-style="currency" currency-code="USD"></lightning-formatted-number>
                                    </div>
                                </td>
                            </tr>
                        </template>
                    </template>
                    
                    <!-- Only show error message when errors is actually defined and has a value -->
                    <template if:true={errors}>
                        <tr>
                            <td colspan="6">
                                <div class="slds-text-color_error">Error loading inventory data</div>
                            </td>
                        </tr>
                    </template>
               
                    <!-- Show no records message when appropriate -->
                    <template if:true={noRecords}>
                        <tr>
                            <td colspan="6">
                                <div class="slds-text-align_center">No records found</div>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </template>
        <!--- Data Table-->
        
    </lightning-card>
</template>